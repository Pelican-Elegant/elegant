# Copyright (C) 2017, 2018 Pablo Iranzo GÃ³mez <Pablo.Iranzo@gmail.com>

language: python
dist: trusty
sudo: required

python:
- '3.7'

env:
- TEST_CMD="pelican content/ -o output/"
- TEST_CMD="pelican content/ -o output/ -s ./publishconf.py"

# prepare and move data for execution

before_install:
- pip install -U pip
- pip install -U setuptools
- pip install -r ./requirements.txt
- cd documentation
- make themes-sync
- make plugins-sync

script:
- $TEST_CMD
- w3c_validator $(find output/ -name '*.html' -type f)
